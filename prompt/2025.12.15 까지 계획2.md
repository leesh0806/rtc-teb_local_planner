## 📊 1. 비교 실험 기준 (Evaluation Metrics)
### 1. 안정성 및 승차감 (Stability & Smoothness)

**각속도 변화량 (Yaw Rate Smoothness):**

- 시간에 따른 각속도($\omega$) 그래프를 그립니다.
    
- TEB는 최적화 과정에서 경로가 툭툭 튀는 경향이 있어 각속도가 급격히 변할 수 있습니다.
    
- MPPI는 샘플링 평균을 쓰기 때문에 더 부드러울 수 있습니다.

**속도 및 저크 (Acceleration & Jerk):**

- 급가속/급제동 횟수. (묘목을 다치게 하거나 흙을 파헤칠 위험)

**경로의 곡률 (Path Curvature):**

- 얼마나 부드러운 곡선을 그리는가?

### 2. 주행 효율성
- **주행 시간 (Travel Time):**
    - 목표 지점까지 걸린 시간.
        
- **주행 거리 (Path Length):**
    - 불필요하게 돌아가지 않는지 확인.
        
- **성공률 (Success Rate):**
    - 장애물 코스 10회 주행 시 몇 번 성공했는가? (특히 좁은 묘목 사이 통과 시나리오)

### 3. 제어 정밀도 (Control Precision)

- **도착 위치 오차 (Goal Pose Error):**
    
    - 목표 지점($x, y, \theta$)에 얼마나 정확하게 주차했는가?
        
    - TEB는 정밀 주차에 강하고, MPPI는 설정에 따라 오차가 있을 수 있습니다.
        
- **경로 추종 오차 (Path Tracking Error):**
    
    - Global Path(중심선)에서 얼마나 벗어나서 주행했는가?

### 4. 연산 비용 (Computational Cost)

- **제어 주파수 (Control Frequency, Hz):**
    
    - 로컬 플래너가 초당 몇 번의 명령을 내리는가? (높을수록 좋음)
        
    - TEB는 복잡한 상황에서 연산 시간이 늘어나 주파수가 떨어질 수 있습니다.
        
- **CPU/GPU 점유율:**
    
    - MPPI는 GPU 가속(Torch 등)을 쓰면 빠르지만, CPU만 쓰면 매우 느릴 수 있습니다. 당신의 3060 GPU 환경에서 얼마나 자원을 먹는지 확인해야 합니다.

## 🧪 2. 추천 실험 시나리오 (Gazebo World)

평지 맵에서 다음 3가지 상황을 만들어 테스트해보세요.

1. **Open Space (직진 및 회전):** 장애물 없는 넓은 공간에서 목표점까지 이동. (기본 속도 및 가속 프로파일 확인)
    
2. **Obstacle Course (장애물 회피):** 묘목(원기둥)들이 불규칙하게 배치된 곳 통과. (회피 능력 및 경로 생성 속도 확인)
    
3. **Narrow Corridor (좁은 통로):** 양옆에 벽이나 묘목이 빽빽한 좁은 길 통과. (정밀도 및 진동 여부 확인)

## 📝 3. 데이터 수집 및 시각화 방법 (Action Plan)
실험을 진행하며 다음 도구들을 사용해 데이터를 기록하세요.

1. **Rosbag2 기록 (필수):** (이건 그냥 단지 예시임 필요하면 더 추가해도 됨)
```bash
ros2 bag record /odom /cmd_vel /plan /local_plan /tf
```

**데이터 분석 도구 (추천):**

- **PlotJuggler:** Rosbag 파일을 불러와서 그래프를 그리기에 최적입니다.
    
    - **X축:** Time
        
    - **Y축:** `odom.twist.twist.angular.z` (각속도) ← **이걸 캡처해서 교수님께 보여드리면 좋습니다.**
        
    - TEB와 MPPI의 각속도 그래프를 겹쳐서 보여주면 "어떤 것이 덜 흔들리는지" 바로 증명됩니다.
        
- **Python Script:** 이동 거리, 평균 속도 등을 계산할 때 사용.

### 중요
Nav2 설정 파일(`nav2_params.yaml`)에서 플러그인만 바꿔가며 **TEB**와 **MPPI**를 번갈아 실행해보고, `ros2 bag`으로 데이터를 모으세요.